<%- include('partials/header'); -%>



<div id="wrapper">
    <div class="d-flex flex-column" id="content-wrapper">
        <div id="content">
            <div class="container-fluid">
                <h3 class="text-dark mb-4">Book an Appointment</h3>
                <div class="row mb-3">
                    <div class="form-row">
                        <div class="col">
                            <label>Specialty&nbsp; </label><br>
                            <select style="width: 200px;" class="form-control form-control-sm custom-select custom-select-sm" id="SP" onchange="fun()" name="SPID">
                                <option value="" selected="selected"> Select Specialty</option>
                                <%SP.forEach(function (i){%>
                                <option value="<%=i.SPID%>" ><%=i.Specialty%></option>
                                <%})%>
                            </select>
                        </div>
                         <div class="col">
                            <label>Date of Appointment</label><input class="form-control" id="date" type="date" name="DoB"  onchange="fun()">
                            </div>
                        <div id="dataTable_length" class="dataTables_length" aria-controls="dataTable"><label>City&nbsp; </label><br> <select style="width: 200px;" class="form-control form-control-sm custom-select custom-select-sm" name="HID" id="HID" onchange="fun()">
                                <option value="" selected="selected"> Select city</option>
                                <%Hos.forEach(function (i){%>
                                <option value="<%=i.HID%>" ><%=i.HName%></option>
                                <%})%>

                            </select>&nbsp;
                        </div>

                         </div>
                       </div>
                   </div>
                            </div>
                            <div class="card-header py-3">
                                <p class="text-primary m-0 font-weight-bold">Appointments</p>
                            </div>
                            <div class="card-body" id="addCon">

                        </div>

                </div>
            </div>
        </div>


<script>
    import ejs from "../node_modules/ejs/ejs.min.js";
    function fun() {
        if (document.getElementById("SP").value!="" & document.getElementById("HID").value!="" &document.getElementById("date")!=""){
        // Grab the template
        $.get('/data', function (template) {
            // Compile the EJS template.
            var func = ejs.compile(template);

            // Grab the data
            $.get('/getAppointment', function (data) {
                // Generate the html from the given data.
                var html = func(data);
                $('#addCon').html(html);
            });
        });
    }}
    function getthis(){
    if (document.getElementById("SP").value!="" & document.getElementById("HID").value!="" &document.getElementById("date")!=""){
    var path = '/getAppointment?SP='+document.getElementById("SP").value+"&HID="+document.getElementById("HID").value+"&Adate="+document.getElementById("date").value
    $.ajax(path,{ success: function (data, status, xhr) { $("#addCon").load('/data',[data],meth)


    } });
    }}
    function f() {
        $.ajax('/data',{success:function (data,status,xhr){
            return data
            }})

    }
</script>
<%- include('partials/footer'); -%>